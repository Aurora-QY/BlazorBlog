@page "/post/{Id:int}"
@inject IPostService PostService
@inject MarkdownRenderer MarkdownRenderer

<div class="post-detail">
    @if (post == null)
    {
        <p>Loading...</p>
    }
    else
    {
        <h1 class="post-title">@post.Title</h1>
        <div class="post-meta">
            <span>By @post.AuthorName</span>
            <span>on @post.CreatedAt.ToLongDateString()</span>
        </div>
        @if (!string.IsNullOrEmpty(post.ImageUrl))
        {
            <img src="@post.ImageUrl" alt="@post.Title" class="post-image" />
        }
        <div class="post-content">
            @((MarkupString)MarkdownRenderer.RenderToHtml(post.Content))
        </div>
    }
</div>

@code {
    [Parameter]
    public int Id { get; set; }

    private PostDto post;

    protected override async Task OnParametersSetAsync()
    {
        post = await PostService.GetPostByIdAsync(Id);
    }
}